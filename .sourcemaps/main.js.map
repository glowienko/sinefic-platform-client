{"version":3,"sources":["../../node_modules/@angular/core/@angular lazy","../../src lazy","../../src/pages/home/home.ts","../../src/pages/admin/admin.ts","../../src/pages/group-management/group-management.ts","../../src/pages/subscriber/subscriber.ts","../../src/pages/subscriber-group-selected-modal/subscriber-group-selected-modal.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/app/app.component.ts","../../src/services/nfc-tag-service.ts","../../src/providers/tags-client/domain/user-tag-data.ts","../../src/providers/tags-client/domain/group.ts","../../src/providers/tags-client/tags-client.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 110;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/@angular lazy\n// module id = 110\n// module chunks = 0","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 152;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 152\n// module chunks = 0","\nimport { Component } from '@angular/core';\nimport { AlertController, Platform } from 'ionic-angular';\nimport { NFC } from '@ionic-native/nfc';\n\nimport { NfcTagService } from './../../services/nfc-tag-service'\n\n\n@Component({\n  selector: 'page-home',\n  templateUrl: 'home.html',\n  providers: [NfcTagService]\n})\nexport class HomePage {\n\n  errorMessage: any;\n\n  constructor(private platform: Platform, private nfc: NFC, private nfcTagService: NfcTagService, private alertCtrl: AlertController) {\n    \n    nfc.enabled().then(\n      () => {\n        this.onNfcEnabled();\n      },\n      () => this.onNfcDisabled());\n\n    console.log('in home controller');\n  }\n\n  public adminPage() {\n    let tag = { id: [3, 2, 1] };\n    let tagEvent = { 'tag': tag };\n    console.log('in adminPage method');\n\n    this.nfcTagService.tagReadSuccess(tagEvent);\n  }\n\n  public subscriberPage() {\n    let tag = { id: [1, 2, 3] };\n    let tagEvent = { 'tag': tag };\n    console.log('subscriber page method');\n\n    this.nfcTagService.tagReadSuccess(tagEvent);\n  }\n\n  private onNfcDisabled() {\n    let alert = this.alertCtrl.create({\n      title: 'Switch on NFC in your smartphone',\n      buttons: ['Ok']\n    });\n    alert.present();\n  }\n\n  private onNfcEnabled() {\n    //need to this.nfc.beginSession, but there is no such function\n    this.addTagListeners();\n  }\n\n  private addTagListeners() {\n    console.log('adding tag listeners');\n    this.nfc.addNdefListener(this.nfcTagService.tagReadSuccess, this.nfcTagService.failureReadTag)\n      .subscribe(\n      (tagEvent) => this.nfcTagService.tagReadSuccess(tagEvent),\n      (error) => this.nfcTagService.failureReadTag(error)\n      );\n\n    this.nfc.addTagDiscoveredListener(this.nfcTagService.tagReadSuccess, this.nfcTagService.failureReadTag)\n      .subscribe(\n      (tagEvent) => this.nfcTagService.tagReadSuccess(tagEvent),\n      (error) => this.nfcTagService.failureReadTag(error));\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts","import { Component } from '@angular/core';\r\nimport { NavController, NavParams, ModalController, AlertController } from 'ionic-angular';\r\nimport { Storage } from '@ionic/storage';\r\n\r\nimport { GroupManagementPage } from './../../pages/group-management/group-management';\r\nimport { Group } from './../../providers/tags-client/domain/group';\r\nimport { TagsClient } from './../../providers/tags-client/tags-client';\r\nimport { UserTagData } from './../../providers/tags-client/domain/user-tag-data';\r\n\r\n@Component({\r\n  selector: 'page-admin',\r\n  templateUrl: 'admin.html'\r\n})\r\nexport class AdminPage {\r\n\r\n\r\n  public groups: Array<Group>;\r\n  private tagId: Array<Number>;\r\n  public errorMessage: any;\r\n\r\n\r\n  constructor(public navCtrl: NavController, public navParams: NavParams,\r\n    private storage: Storage, private tagsApi: TagsClient, public modalCtrl: ModalController,\r\n    private alertCtrl: AlertController) { }\r\n\r\n  ionViewDidLoad() {\r\n    this.getGroupsFromStorage();\r\n    this.getTagIdFromStorage();\r\n  }\r\n\r\n  showGroupView(group: Group) {\r\n    this.navCtrl.push(GroupManagementPage, { group: group, tagId: this.tagId});\r\n  }\r\n\r\n  showAddGroupPopup() {\r\n    let newGroup = new Group();\r\n    let alert = this.alertCtrl.create();\r\n    alert.setTitle('Add new group');\r\n    alert.setMessage('Create new group passing name and service you will be uploading to this group');\r\n    alert.addButton('Cancel');\r\n    alert.addButton({\r\n      text: 'Create',\r\n      handler: (data) => {\r\n        newGroup.name = data.name; //sprawdzic co jest w tym data :D\r\n        newGroup.service = data.service;\r\n\r\n        console.log(\"created new group:\");\r\n        console.log(newGroup);\r\n        this.addGroup(newGroup);\r\n      }\r\n    });\r\n    alert.addInput({\r\n      name: 'name',\r\n      placeholder: 'group name'\r\n    });\r\n    alert.addInput({\r\n      name: 'service',\r\n      placeholder: 'group service name'\r\n    });\r\n\r\n    alert.present();\r\n  }\r\n\r\n  private addGroup(newGroup: Group) {\r\n    this.tagsApi.createGroup(newGroup, this.tagId)\r\n      .subscribe(\r\n      group => this.groups.push(group),\r\n      error => this.errorMessage = <any>error);\r\n\r\n  }\r\n\r\n  private getGroupsFromStorage() {\r\n    this.storage.ready().then(() => {\r\n      this.storage.get('tag-info')\r\n        .then(\r\n        (userTagData: UserTagData) => {\r\n          this.groups = userTagData.groups;\r\n        });\r\n    });\r\n  }\r\n\r\n  private getTagIdFromStorage() {\r\n    this.storage.ready().then(() => {\r\n      this.storage.get('tag-id')\r\n        .then(\r\n        (tagId: any) => {\r\n          this.tagId = tagId;\r\n        });\r\n    });\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/admin/admin.ts","import { Component } from '@angular/core';\r\nimport { NavController, NavParams } from 'ionic-angular';\r\n\r\nimport { Group } from './../../providers/tags-client/domain/group';\r\nimport { UserTagData } from './../../providers/tags-client/domain/user-tag-data';\r\nimport { TagsClient } from './../../providers/tags-client/tags-client';\r\n\r\n@Component({\r\n  selector: 'page-group-management',\r\n  templateUrl: 'group-management.html',\r\n  providers: [TagsClient]\r\n})\r\nexport class GroupManagementPage {\r\n\r\n  private ownerId: Array<Number>;\r\n  public group: Group;\r\n  public groupMembers: Array<UserTagData>;\r\n\r\n  constructor(public navCtrl: NavController, public navParams: NavParams, public tagsClient: TagsClient) { }\r\n\r\n  ionViewDidLoad() {\r\n    this.group = this.navParams.data.group;\r\n    this.ownerId = this.navParams.data.tagId;\r\n\r\n    this.tagsClient.getTagsForGroup(this.group.name, this.ownerId).subscribe(\r\n      (groupMembers) => {\r\n        this.groupMembers = groupMembers;\r\n      });\r\n  }\r\n\r\n  public addGroupMember() {\r\n    let newTag = new UserTagData();\r\n\r\n    newTag.groups.push(this.group);\r\n    newTag.isAdmin = false;\r\n    newTag.id = [1,1,1];\r\n    //show popup for scanning tag ID TODO : take tag /id from the real NFC TAG\r\n\r\n    //scan tag, call endpoint to add tag, and add it to list  //TODO: !!!!\r\n    this.tagsClient.addTagToGroup(this.group.name, newTag);\r\n  }\r\n\r\n  public deleteGroupMember(userTag: UserTagData) {\r\n    this.tagsClient.deleteTagFromGroup(userTag.id, this.group.name);\r\n  }\r\n\r\n  public deleteGroup() {\r\n    this.tagsClient.deleteGroup(this.group.name);\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/group-management/group-management.ts","import { Component } from '@angular/core';\r\nimport { NavController, NavParams, ModalController } from 'ionic-angular';\r\nimport { Storage } from '@ionic/storage';\r\n\r\nimport { SubscriberGroupSelectedModalPage } from '././../subscriber-group-selected-modal/subscriber-group-selected-modal';\r\n\r\nimport { Group } from './../../providers/tags-client/domain/group';\r\nimport { TagsClient } from './../../providers/tags-client/tags-client';\r\nimport { UserTagData } from './../../providers/tags-client/domain/user-tag-data';\r\nimport { ContentUrl } from './../../providers/tags-client/domain/content-url';\r\n\r\n@Component({\r\n  selector: 'page-subscriber',\r\n  templateUrl: 'subscriber.html',\r\n  providers: [TagsClient]\r\n})\r\nexport class SubscriberPage {\r\n\r\n  public groups: Array<any>;\r\n\r\n\r\n  constructor(public navCtrl: NavController, public navParams: NavParams,\r\n    private storage: Storage, private tagsClient: TagsClient, public modalCtrl: ModalController) { }\r\n\r\n  ionViewDidLoad() {\r\n    this.getGroupsFromStorage();\r\n  }\r\n\r\n  private getGroupsFromStorage() {\r\n    this.storage.get('tag-info')\r\n      .then(\r\n      (userTagData: UserTagData) => {\r\n        console.log('in getGroups from storage');\r\n        console.log(userTagData.groups);\r\n        this.groups = userTagData.groups;\r\n      });\r\n  }\r\n\r\n  public getContentUrlForGroup(group: Group) {\r\n    this.tagsClient.getContentUrlByGroupName(group.name)\r\n      .subscribe(\r\n      (contentUrl: ContentUrl) => {\r\n        let dataForModal = {\r\n          url: contentUrl.url,\r\n          group: group\r\n        };\r\n        this.openDecisionModal(dataForModal);\r\n      }\r\n      )\r\n  }\r\n\r\n  private openDecisionModal(dataForModaldata: any) {\r\n    let modal = this.modalCtrl.create(SubscriberGroupSelectedModalPage, { data: dataForModaldata });\r\n    modal.present();\r\n\r\n  }\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/subscriber/subscriber.ts","import { Component } from '@angular/core';\r\nimport { NavController, NavParams, ViewController } from 'ionic-angular';\r\n\r\nimport { Group } from './../../providers/tags-client/domain/group';\r\nimport { ContentUrl } from './../../providers/tags-client/domain/content-url'\r\n\r\n@Component({\r\n  selector: 'page-subscriber-group-selected-modal',\r\n  templateUrl: 'subscriber-group-selected-modal.html'\r\n})\r\nexport class SubscriberGroupSelectedModalPage {\r\n\r\n  group: Group;\r\n  url: ContentUrl;\r\n\r\n  constructor(public navCtrl: NavController, public navParams: NavParams, public viewCtrl: ViewController) {\r\n\r\n   }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('data from nav params - should be group');\r\n    let data = this.navParams.get('data');//check this\r\n    console.log(data.group);\r\n    this.group = data.group;\r\n    this.url = data.url;\r\n  }\r\n\r\n  dismiss() {\r\n    this.viewCtrl.dismiss();\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/subscriber-group-selected-modal/subscriber-group-selected-modal.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app.module';\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { IonicApp, IonicErrorHandler, IonicModule } from 'ionic-angular';\nimport { ErrorHandler, NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { SplashScreen } from '@ionic-native/splash-screen';\nimport { StatusBar } from '@ionic-native/status-bar';\n\nimport { NFC } from '@ionic-native/nfc';\nimport { IonicStorageModule } from '@ionic/storage';\n\nimport { MyApp } from './app.component';\nimport { HomePage } from '../pages/home/home';\nimport { AdminPage } from '../pages/admin/admin';\nimport { SubscriberPage } from '../pages/subscriber/subscriber';\nimport { GroupManagementPage } from '../pages/group-management/group-management';\nimport { SubscriberGroupSelectedModalPage } from '../pages/subscriber-group-selected-modal/subscriber-group-selected-modal'\n\nimport { TagsClient } from './../providers/tags-client/tags-client'\n\n@NgModule({\n  declarations: [\n    MyApp,\n    HomePage,\n    AdminPage,\n    SubscriberPage,\n    GroupManagementPage,\n    SubscriberGroupSelectedModalPage\n  ],\n  imports: [\n    BrowserModule,\n    IonicModule.forRoot(MyApp)\n  ],\n  bootstrap: [IonicApp],\n  entryComponents: [\n    MyApp,\n    HomePage,\n    AdminPage,\n    SubscriberPage,\n    GroupManagementPage,\n    SubscriberGroupSelectedModalPage\n  ],\n  providers: [\n    StatusBar,\n    SplashScreen,\n    {provide: ErrorHandler, useClass: IonicErrorHandler},\n    NFC,\n    Storage,\n    TagsClient\n  ]\n})\nexport class AppModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Component } from '@angular/core';\nimport { Platform } from 'ionic-angular';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\nimport { HomePage } from '../pages/home/home';\n\n@Component({\n  templateUrl: 'app.html'\n})\nexport class MyApp {\n  rootPage:any = HomePage;\n\n  constructor(platform: Platform, statusBar: StatusBar, splashScreen: SplashScreen) {\n    platform.ready().then(() => {\n      statusBar.styleDefault();\n      splashScreen.hide();\n    });\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import { Injectable } from '@angular/core';\r\nimport { AlertController, NavController } from 'ionic-angular';\r\n\r\nimport { Storage } from '@ionic/storage';\r\nimport { TagsClient } from './../providers/tags-client/tags-client'\r\nimport { AdminPage } from './../pages/admin/admin';\r\nimport { SubscriberPage } from './../pages/subscriber/subscriber';\r\n\r\nimport { UserTagData } from './../providers/tags-client/domain/user-tag-data';\r\n\r\n@Injectable()\r\nexport class NfcTagService {\r\n\r\n    constructor(private storage: Storage, private alertCtrl: AlertController, private navCtrl: NavController, private tagsClient: TagsClient) { }\r\n\r\n    public tagReadSuccess(tagEvent: any) {\r\n        console.log('in tag read success, tag:');\r\n        console.log(tagEvent.tag);\r\n\r\n        this.tagsClient.getTagInfoById(this.extractTagIdFromTagEvent(tagEvent))\r\n            .subscribe(\r\n            (userTagData) => {\r\n                console.log(userTagData);\r\n                this.saveUserTagToStorage(userTagData);\r\n                this.showTagReadSuccessAlert(userTagData.isAdmin);\r\n            },\r\n            error => this.showApiConnectionError(error));\r\n    }\r\n\r\n    public failureReadTag(error) {\r\n        let alert = this.alertCtrl.create({\r\n            title: 'Tag read failure!',\r\n            message: error,\r\n            buttons: ['Ok']\r\n        });\r\n        alert.present();\r\n    }\r\n    \r\n\r\n    private extractTagIdFromTagEvent(tagEvent: any) {\r\n        return tagEvent.tag.id;\r\n    }\r\n\r\n    private saveUserTagToStorage(userTagData: UserTagData) {\r\n        this.storage.ready()\r\n            .then(() => {\r\n\r\n                console.log('in tag storage ready, saving: user-tag-data');\r\n                console.log(userTagData);\r\n\r\n                this.storage.set('tag-info', userTagData);\r\n                this.storage.set('tag-id', userTagData.id);\r\n            });\r\n    }\r\n\r\n    private showTagReadSuccessAlert(isAdmin: boolean) {\r\n        let role = isAdmin ? 'Admin' : 'Subscriber';\r\n        let alert = this.alertCtrl.create({\r\n            title: 'Tag read success',\r\n            subTitle: 'Hello ' + role + ' !',\r\n            message: 'Click OK to use application',\r\n            buttons: [\r\n                {\r\n                    text: 'OK',\r\n                    handler: () => this.changeViewDepeningOnRole(isAdmin)\r\n                }\r\n            ]\r\n        });\r\n        alert.present();\r\n    }\r\n\r\n    private changeViewDepeningOnRole(isAdmin: boolean) {\r\n        if (isAdmin) {\r\n            this.navCtrl.push(AdminPage);\r\n        }\r\n        else {\r\n            this.navCtrl.push(SubscriberPage);\r\n        }\r\n    }\r\n\r\n    private showApiConnectionError(error) {\r\n        let alert = this.alertCtrl.create({\r\n            title: 'Connection error!',\r\n            subTitle: 'Cannot fetch tag-info from the server',\r\n            message: error,\r\n            buttons: ['Ok']\r\n        });\r\n        alert.present();\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/nfc-tag-service.ts","import {Group} from './group';\r\n\r\nexport class UserTagData {\r\n    id: Array<Number>\r\n    groups: Array<Group>\r\n    isAdmin: boolean\r\n    access_token: string\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/providers/tags-client/domain/user-tag-data.ts","export class Group {\r\n    id: Number\r\n    name: string\r\n    service: string // eg. Geolocation, Message sending\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/providers/tags-client/domain/group.ts","import { Injectable } from '@angular/core';\r\nimport { Http, Response, Headers, RequestOptions } from '@angular/http';\r\nimport { Storage } from '@ionic/storage';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport 'rxjs/add/operator/map';\r\nimport 'rxjs/add/operator/catch';\r\n\r\nimport { UserTagData } from './domain/user-tag-data';\r\nimport { ContentUrl } from './domain/content-url';\r\nimport { Group } from './domain/group';\r\n\r\n@Injectable()\r\nexport class TagsClient {\r\n\r\n  private groupsUrl: string;\r\n  private tagUrl: string;\r\n  private contentUrl: string;\r\n  private headers: Headers;\r\n  private options: RequestOptions;\r\n\r\n  private server_url: string = 'http://localhost:9595';// TODO: should be taken from config\r\n\r\n  constructor(public http: Http, public storage: Storage) {\r\n    this.groupsUrl = '/api/groups';// TODO: should be taken from config\r\n    this.tagUrl = '/api/tag';\r\n    this.contentUrl = '/api/content/url';\r\n\r\n    this.headers = new Headers({ 'Content-Type': 'application/json' });\r\n\r\n    this.options = new RequestOptions({ headers: this.headers });\r\n  }\r\n\r\n  public getTagInfoById(tagId: Array<Number>): Observable<UserTagData> {\r\n\r\n    console.log('in get tag info method api call');\r\n\r\n    let infoUrl: any = this.server_url + this.tagUrl + '?' + this.getTagIdForUrl(tagId);\r\n\r\n    return this.http.get(infoUrl, this.options)\r\n      .map(this.extractData)\r\n      .catch(this.handleError);\r\n  }\r\n\r\n  public getContentUrlByGroupName(groupName: string): Observable<ContentUrl> {\r\n    console.log('in get conntent by group name api call');\r\n    this.addAuthHeaderIfNoExist();\r\n    let contetnUrl: any = this.server_url + this.contentUrl + `/${groupName}`;\r\n\r\n    return this.http.get(contetnUrl, this.options)\r\n      .map(this.extractData)\r\n      .catch(this.handleError);\r\n  }\r\n\r\n  public createGroup(newGroup: Group, tagId: Array<Number>): Observable<Group> {\r\n    this.addAuthHeaderIfNoExist();\r\n    let groupsUrl: any = this.server_url + this.groupsUrl;\r\n    let requestBody = {\r\n      newGroup: newGroup,\r\n      tagId: tagId\r\n    };\r\n    return this.http.post(this.groupsUrl, requestBody, this.options)\r\n      .map(this.extractData)\r\n      .catch(this.handleError);\r\n  }\r\n\r\n  public getTagsForGroup(groupName: string, groupAdmin: Array<Number>) {\r\n    this.addAuthHeaderIfNoExist();\r\n    let groupsUrl: any = this.server_url + this.groupsUrl + `/${groupName}` + '?' + this.getTagIdForUrl(groupAdmin);\r\n\r\n    return this.http.get(groupsUrl, this.options)\r\n      .map(this.extractData)\r\n      .catch(this.handleError);\r\n  }\r\n\r\n  public deleteGroup(groupName: string): Observable<Group> {\r\n    this.addAuthHeaderIfNoExist();\r\n    let groupsUrl: any = this.server_url + this.groupsUrl + `/${groupName}`;\r\n\r\n    return this.http.delete(groupsUrl, this.options)\r\n      .map(this.extractData)\r\n      .catch(this.handleError);\r\n  }\r\n\r\n  public addTagToGroup(groupName: string, newTag: UserTagData): Observable<Group> {\r\n    this.addAuthHeaderIfNoExist();\r\n    let addTagTogroupUrl: any = this.server_url + this.tagUrl + `/${groupName}`;\r\n\r\n    return this.http.post(addTagTogroupUrl, newTag, this.options)\r\n      .map(this.extractData)\r\n      .catch(this.handleError);\r\n  }\r\n\r\n  public deleteTagFromGroup(tagId: Array<Number>, groupName: string): Observable<Group> {\r\n    this.addAuthHeaderIfNoExist();\r\n    let deleteTagFromGroupUrl: any = this.server_url + this.tagUrl + `/${tagId}/group/${groupName}`;\r\n\r\n    return this.http.delete(deleteTagFromGroupUrl, this.options)\r\n      .map(this.extractData)\r\n      .catch(this.handleError);\r\n  }\r\n\r\n  //addMessage to group -- api for services :)\r\n  //send location to group\r\n\r\n  private addAuthHeaderIfNoExist() {\r\n    if (!this.headers.has('Authorization')) {\r\n      this.storage.ready().then(() => {\r\n        this.storage.get('tag-info').then(\r\n          (UserTagData: UserTagData) => {\r\n            this.headers.append('Authorization', UserTagData.access_token);\r\n            this.options = new RequestOptions({ headers: this.headers });\r\n          });\r\n      });\r\n    }\r\n  }\r\n\r\n  private extractData(res: Response) {\r\n    console.log('in extract data, tags api, response:');\r\n    console.log(res.json());\r\n    let body = res.json();\r\n    return body || {};\r\n  }\r\n\r\n  private getTagIdForUrl(tagId: Array<Number>) {\r\n    //returns: tag_id[one]=1&tag_id[two]=2&tag_id[three]=3\r\n    return 'tag_id[one]=' + tagId[0] + '&tag_id[two]=' + tagId[1] + '&tag_id[three]=' + tagId[2];\r\n  }\r\n\r\n  private handleError(error: Response | any) {\r\n\r\n    let errMsg: string;\r\n    if (error instanceof Response) {\r\n      const body = error.json() || '';\r\n      const err = body.error || JSON.stringify(body);\r\n      errMsg = `${error.status} - ${error.statusText || ''} ${err}`;\r\n    } else {\r\n      errMsg = error.message ? error.message : error.toString();\r\n    }\r\n    console.error(errMsg);\r\n    return Observable.throw(errMsg);\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/providers/tags-client/tags-client.ts"],"sourceRoot":""}